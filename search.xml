<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>教程详解-极客浪漫表白红包</title>
    <url>/2019/12/29/%E6%95%99%E7%A8%8B%E8%AF%A6%E8%A7%A3-%E6%9E%81%E5%AE%A2%E6%B5%AA%E6%BC%AB%E8%A1%A8%E7%99%BD%E7%BA%A2%E5%8C%85/</url>
    <content><![CDATA[<p>[TOC]</p>
<h1 id="【让宝宝不要输在起跑线】文档说明"><a href="#【让宝宝不要输在起跑线】文档说明" class="headerlink" title="【让宝宝不要输在起跑线】文档说明"></a>【让宝宝不要输在起跑线】文档说明</h1><p>作者：<a href="mailto:bennyrhys@163.com">bennyrhys@163.com</a></p>
<h2 id="版本配置"><a href="#版本配置" class="headerlink" title="版本配置"></a>版本配置</h2><p>Jdk1.8.111</p>
<p>meaven3.5.4</p>
<p>springboot2.1.3</p>
<h1 id="【初识】SpringBoot-hello-world"><a href="#【初识】SpringBoot-hello-world" class="headerlink" title="【初识】SpringBoot-hello world"></a>【初识】SpringBoot-hello world</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"><span class="comment">//    @GetMapping("/hello")</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/hello"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello world"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>命令行启动</p>
<figure class="highlight plain"><figcaption><span>bennyrhys$ mvn spring-boot:run```</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">终止</span><br><span class="line"></span><br><span class="line">ctrl+c</span><br><span class="line"></span><br><span class="line">## 解决打包失败</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;xml</span><br><span class="line">&lt;!--            为了打包后加的--&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-surefire-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;skipTests&gt;true&lt;&#x2F;skipTests&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br></pre></td></tr></table></figure>

<p>查看jar包</p>
<p>ls target/</p>
<p>运行jar</p>
<p>java -jar target/luckymoney-0.0.1-SNAPSHOT.jar</p>
<p>访问：<a href="http://localhost:8080/hello" target="_blank" rel="noopener">http://localhost:8080/hello</a></p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">server.servlet.context-path=/luckymoney</span><br><span class="line">server.port=8081</span><br></pre></td></tr></table></figure>

<h3 id="application-yml-推荐"><a href="#application-yml-推荐" class="headerlink" title="application.yml(推荐)"></a>application.yml(推荐)</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/luckymoney</span></span><br></pre></td></tr></table></figure>

<p>访问：<a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a></p>
<h2 id="git提交-：helloworld-yml启动及简单配置"><a href="#git提交-：helloworld-yml启动及简单配置" class="headerlink" title="git提交 ：helloworld+yml启动及简单配置"></a>git提交 ：helloworld+yml启动及简单配置</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;初始化</span><br><span class="line">springboot2小时浪漫红包 bennyrhys$ git init</span><br><span class="line">&#x2F;&#x2F;配置提交用户</span><br><span class="line">git config user.name bennyrhys</span><br><span class="line">git config user.email bennyrhys@163.com</span><br><span class="line">&#x2F;&#x2F;验证用户信息</span><br><span class="line">cat .git&#x2F;config</span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion &#x3D; 0</span><br><span class="line">	filemode &#x3D; true</span><br><span class="line">	bare &#x3D; false</span><br><span class="line">	logallrefupdates &#x3D; true</span><br><span class="line">	ignorecase &#x3D; true</span><br><span class="line">	precomposeunicode &#x3D; true</span><br><span class="line">[user]</span><br><span class="line">	name &#x3D; bennyrhys</span><br><span class="line">	email &#x3D; bennyrhys@163.com</span><br><span class="line">&#x2F;&#x2F;查看文件状态</span><br><span class="line">git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">	.DS_Store</span><br><span class="line">	luckymoney&#x2F;</span><br><span class="line">&#x2F;&#x2F;添加修改文件到暂存区</span><br><span class="line">git add luckymoney&#x2F;</span><br><span class="line">&#x2F;&#x2F;添加文件到数据库</span><br><span class="line">git commit -m &quot;hello world+yml 简单配置启动&quot;</span><br><span class="line">&#x2F;&#x2F;建立远程连接</span><br><span class="line">&#x2F;&#x2F;列出已经存在的远程分支 -v详情</span><br><span class="line">git remote -v</span><br><span class="line">&#x2F;&#x2F;创建远程分支</span><br><span class="line">git remote add  origin_lm https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney.git </span><br><span class="line">&#x2F;&#x2F;检测分支</span><br><span class="line">git remote -v</span><br><span class="line">origin_lm	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney.git (fetch)</span><br><span class="line">origin_lm	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney.git (push)</span><br><span class="line">&#x2F;&#x2F;此处切记更改上传人密钥信息</span><br><span class="line">&#x2F;&#x2F;push文件</span><br><span class="line">git push origin_lm master</span><br><span class="line">&#x2F;&#x2F;远程仓库名冲突，修改远程分支</span><br><span class="line">git remote remove origin_lm</span><br><span class="line">&#x2F;&#x2F;新建远程分支</span><br><span class="line">git remote add origin_lm  https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git</span><br><span class="line">&#x2F;&#x2F;因为github原有README.md文档需要解决冲突</span><br><span class="line">git pull origin_lm master</span><br><span class="line">&#x2F;&#x2F;git push origin_lm master</span><br></pre></td></tr></table></figure>

<h1 id="【君子之交-淡如水】解放双手，配置红包"><a href="#【君子之交-淡如水】解放双手，配置红包" class="headerlink" title="【君子之交-淡如水】解放双手，配置红包"></a>【君子之交-淡如水】解放双手，配置红包</h1><h2 id="手动单个配置"><a href="#手动单个配置" class="headerlink" title="手动单个配置"></a>手动单个配置</h2><p>1 .application.yml</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">mixMoney</span>: <span class="string">1</span></span><br><span class="line"><span class="attr">maxMoney</span>: <span class="string">99</span></span><br><span class="line"><span class="attr">description</span>: <span class="string">最少要发$&#123;mixMoney&#125;元</span></span><br></pre></td></tr></table></figure>

<p>2 .HelloController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"><span class="comment">//法1：手动引入配置信息</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;mixMoney&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> BigDecimal mixMoney;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;description&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line"><span class="comment">//    @RequestMapping(value = "/hello", method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"mixMoney"</span>+mixMoney+<span class="string">"说明"</span>+description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>访问<a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a></li>
<li>输出：mixMoney1说明最少要发1元</li>
<li>Git上传到分支confmoney</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git branch</span><br><span class="line">* master</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git checkout -b confmoney</span><br><span class="line">M	luckymoney&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;bennyrhys&#x2F;luckymoney&#x2F;HelloController.java</span><br><span class="line">M	luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;application.yml</span><br><span class="line">M	luckymoney_note.md</span><br><span class="line">Switched to a new branch &#39;confmoney&#39;</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git branch</span><br><span class="line">* confmoney</span><br><span class="line">  master</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git status</span><br><span class="line">On branch confmoney</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">	modified:   luckymoney&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;bennyrhys&#x2F;luckymoney&#x2F;HelloController.java</span><br><span class="line">	modified:   luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;application.yml</span><br><span class="line">	modified:   luckymoney_note.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">	.DS_Store</span><br><span class="line">	luckymoney&#x2F;.DS_Store</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and&#x2F;or &quot;git commit -a&quot;)</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git add .</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git commit -m &quot;红包金额-手动配置&quot;</span><br><span class="line">[confmoney bde8c36] 红包金额-手动配置</span><br><span class="line"> 5 files changed, 59 insertions(+), 5 deletions(-)</span><br><span class="line"> create mode 100644 .DS_Store</span><br><span class="line"> create mode 100644 luckymoney&#x2F;.DS_Store</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git remote -v</span><br><span class="line">origin	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git (fetch)</span><br><span class="line">origin	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git (push)</span><br><span class="line">origin_lm	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git (fetch)</span><br><span class="line">origin_lm	https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git (push)</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git push origin_lm confmoney</span><br><span class="line">Enumerating objects: 27, done.</span><br><span class="line">Counting objects: 100% (27&#x2F;27), done.</span><br><span class="line">Delta compression using up to 4 threads</span><br><span class="line">Compressing objects: 100% (11&#x2F;11), done.</span><br><span class="line">Writing objects: 100% (15&#x2F;15), 2.37 KiB | 2.37 MiB&#x2F;s, done.</span><br><span class="line">Total 15 (delta 3), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (3&#x2F;3), completed with 2 local objects.</span><br><span class="line">remote: </span><br><span class="line">remote: Create a pull request for &#39;confmoney&#39; on GitHub by visiting:</span><br><span class="line">remote:      https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject&#x2F;pull&#x2F;new&#x2F;confmoney</span><br><span class="line">remote: </span><br><span class="line">To https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;LuckyMoney-SpringBootProject.git</span><br><span class="line"> * [new branch]      confmoney -&gt; confmoney</span><br></pre></td></tr></table></figure>

<h2 id="自动多个配置红包金额【limit类限制金额范围】"><a href="#自动多个配置红包金额【limit类限制金额范围】" class="headerlink" title="自动多个配置红包金额【limit类限制金额范围】"></a>自动多个配置红包金额【limit类限制金额范围】</h2><ol>
<li>application.yml</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">limit</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">minMoney</span>: <span class="string">1</span></span><br><span class="line">  <span class="attr">maxMoney</span>: <span class="string">99</span></span><br><span class="line">  <span class="attr">description</span>: <span class="string">最少要发$&#123;limit.minMoney&#125;元,最多发$&#123;limit.maxMoney&#125;元</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>LimitConfig</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法2；自动注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>HelloController</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法2；自动注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>输出</li>
</ol>
<p><a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a></p>
<p>说明最少要发1元,最多发99元</p>
<ol start="5">
<li>git提交</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git branch</span><br><span class="line">* confmoney</span><br><span class="line">  master</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git status</span><br><span class="line">On branch confmoney</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   luckymoney&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;bennyrhys&#x2F;luckymoney&#x2F;LimitConfig.java</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">	modified:   README.md</span><br><span class="line">	modified:   luckymoney&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;bennyrhys&#x2F;luckymoney&#x2F;HelloController.java</span><br><span class="line">	modified:   luckymoney&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;bennyrhys&#x2F;luckymoney&#x2F;LimitConfig.java</span><br><span class="line">	modified:   luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;application.yml</span><br><span class="line">	modified:   luckymoney_note.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line"></span><br><span class="line">	README.assets&#x2F;</span><br><span class="line"></span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git add .</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git commit -m &quot;limit类限制金额自动配置&quot;</span><br></pre></td></tr></table></figure>

<h1 id="生成环境开发环境划分"><a href="#生成环境开发环境划分" class="headerlink" title="生成环境开发环境划分"></a>生成环境开发环境划分</h1><ol>
<li>思路</li>
</ol>
<blockquote>
<p>dev开发模式</p>
<p>prod生产模式</p>
<p>由yml控制选择模式</p>
<p>场景</p>
<p>dev：测试0.1 元</p>
<p>prod：正式1元</p>
</blockquote>
<ol start="2">
<li>application-dev.yml</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">profiles</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">active</span>: <span class="string">dev #设定部署的测试配置开发、生产(如果正式上线，可以不修改此处，打包后命令切换环境)</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>application-dev.yml</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">8081</span></span><br><span class="line">  <span class="attr">servlet</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">context-path</span>: <span class="string">/luckymoney</span></span><br><span class="line"><span class="attr">limit</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">minMoney</span>: <span class="string">0.1</span></span><br><span class="line">  <span class="attr">maxMoney</span>: <span class="string">99</span></span><br><span class="line">  <span class="attr">description</span>: <span class="string">最少要发$&#123;limit.minMoney&#125;元,最多发$&#123;limit.maxMoney&#125;元</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>application-prod.yml</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">8081</span></span><br><span class="line">  <span class="attr">servlet</span>:<span class="string"></span></span><br><span class="line">    <span class="meta">context-path</span>: <span class="string">/luckymoney</span></span><br><span class="line"><span class="attr">limit</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">minMoney</span>: <span class="string">1</span></span><br><span class="line">  <span class="attr">maxMoney</span>: <span class="string">99</span></span><br><span class="line">  <span class="attr">description</span>: <span class="string">最少要发$&#123;limit.minMoney&#125;元,最多发$&#123;limit.maxMoney&#125;元</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>输出</li>
</ol>
<blockquote>
<p>Dev:说明最少要发0.1元,最多发99元</p>
<p>Prod:说明最少要发1元,最多发99元</p>
</blockquote>
<ol start="6">
<li>打包命令切换开发环境</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">meaven使用</span><br><span class="line">&#x2F;&#x2F;项目根目录打包</span><br><span class="line">mvn clean package</span><br><span class="line">&#x2F;&#x2F;普通启动-开发环境</span><br><span class="line">java -jar target&#x2F;luckymoney-0.0.1-SNAPSHOT.jar</span><br><span class="line">&#x2F;&#x2F;启动时修改-生产环境</span><br><span class="line">java -jar -Dspring.profiles.active&#x3D;prod  target&#x2F;luckymoney-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>git上传</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git branch</span><br><span class="line">* confmoney</span><br><span class="line">  master</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git add .</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git commit -m &quot;多环境配置-生产、开发&quot;</span><br><span class="line">[confmoney b3f8623] 多环境配置-生产、开发</span><br><span class="line"> 4 files changed, 137 insertions(+), 10 deletions(-)</span><br><span class="line"> create mode 100644 luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;application-dev.yml</span><br><span class="line"> create mode 100644 luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;application-prod.yml</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git push origin_lm confmoney</span><br></pre></td></tr></table></figure>



<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>@Value //单个配置</p>
<p>@Component     @ConfigurationProperties//多个配置</p>
<p>多环境配置</p>
<h1 id="【人生若只如初见】从“程序”入口Controller开始"><a href="#【人生若只如初见】从“程序”入口Controller开始" class="headerlink" title="【人生若只如初见】从“程序”入口Controller开始"></a>【人生若只如初见】从“程序”入口Controller开始</h1><img data-src="luckymoney_note.assets/image-20191229164313530.png" alt="image-20191229164313530" style="zoom:50%;">

<p>@requestmapping旧版使用，新版@getmapping，但有个别场景还是会使用到它的</p>
<h2 id="controller-thymeleaf（不推荐，前后端不分离）"><a href="#controller-thymeleaf（不推荐，前后端不分离）" class="headerlink" title="controller+thymeleaf（不推荐，前后端不分离）"></a>controller+thymeleaf（不推荐，前后端不分离）</h2><p>将restcontrller改成contrllre（报错），增添thymeleaf模版，返回指定templates-index页面</p>
<ol>
<li>改成旧版controller</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法2；自动注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//        return "说明"+limitConfig.getDescription();</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>pom.xml,新增thymeleaf模版</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>新建thymeleaf模版index页面</li>
</ol>
<p>4.访问</p>
<p><a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a></p>
<p>hello world</p>
<ol start="5">
<li>git上传</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git add .</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git commit -m &quot;controller+thymeleaf&quot;</span><br><span class="line">[confmoney 0c07f43] controller+thymeleaf</span><br><span class="line"> 6 files changed, 94 insertions(+), 2 deletions(-)</span><br><span class="line"> create mode 100644 luckymoney&#x2F;src&#x2F;main&#x2F;resources&#x2F;templates&#x2F;index.html</span><br><span class="line"> create mode 100644 luckymoney_note.assets&#x2F;image-20191229164307062.png</span><br><span class="line"> create mode 100644 luckymoney_note.assets&#x2F;image-20191229164313530.png</span><br><span class="line">bennyrhysdeMacBook-Pro:LuckyMoney-SpringBootProject bennyrhys$ git push origin_lm confmoney</span><br></pre></td></tr></table></figure>

<h2 id="恢复访问-Controller-ResponseBody"><a href="#恢复访问-Controller-ResponseBody" class="headerlink" title="恢复访问@Controller+@ResponseBody"></a>恢复访问@Controller+@ResponseBody</h2><p>注销thymeleaf，新增@RestponseBody恢复页面访问，消除报错</p>
<p><strong>@RestponseBody使用，当同时两个方法使用，@RestponseBody添加返回字符串，不加返回h5页面</strong></p>
<p><a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a></p>
<p><a href="http://localhost:8081/luckymoney/hello2" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello2</a></p>
<ol>
<li>pom.xml</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  &lt;!--      &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">--&gt;</span><br><span class="line">&#x2F;&#x2F;注销模版使用，记得每次修改meaven要重新import一下</span><br><span class="line">&#x2F;&#x2F;@Controller+@ResponseBody&#x3D;@RestController</span><br><span class="line">&#x2F;&#x2F;@ResponseBody可以放在方法上用</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>HelloController//单独合并两个注解功能</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法2；自动注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line"><span class="comment">//        return "index";</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>HelloController同时返回 字符串+thymeleaf h5</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法2；自动注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line"><span class="comment">//        return "index";</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>git上传</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;@controller+@ResponseBody&quot;</span><br><span class="line">git push origin_lm confmoney</span><br></pre></td></tr></table></figure>

<h2 id="多访问url同返回（名称数组）"><a href="#多访问url同返回（名称数组）" class="headerlink" title="多访问url同返回（名称数组）"></a>多访问url同返回（名称数组）</h2><p>快捷键：command+p//查看@GetMapping(“/hello”)，括号内参数类型</p>
<ul>
<li><a href="http://localhost:8081/luckymoney/hi" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hi</a>  == <a href="http://localhost:8081/luckymoney/hello" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello</a> 不同名访问同返回</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@GetMapping(&#123;&quot;&#x2F;hello&quot;,&quot;&#x2F;hi&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="url深层访问：-RequestMapping-“hello”"><a href="#url深层访问：-RequestMapping-“hello”" class="headerlink" title="url深层访问：@RequestMapping(“hello”)"></a>url深层访问：@RequestMapping(“hello”)</h2><ul>
<li><a href="http://localhost:8081/luckymoney/hello/say" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello/say</a> url深层访问</li>
</ul>
<p>低级做法：不方便维护，每次写深路径</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/hello/say"</span>)</span><br></pre></td></tr></table></figure>

<p>高级做法：@RequestMapping(“hello”)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/say"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="post请求访问"><a href="#post请求访问" class="headerlink" title="post请求访问"></a>post请求访问</h2><p>​    @PostMapping(“/say”)</p>
<p>get无法接受请求，使用工具postman发送post请求</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @GetMapping("/say")</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/say"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Get-post都行的访问"><a href="#Get-post都行的访问" class="headerlink" title="Get/post都行的访问"></a>Get/post都行的访问</h2><p>不推荐，请求要明确，都行刷流氓</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @GetMapping("/say")</span></span><br><span class="line"><span class="comment">//    @PostMapping("/say")</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/say"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"说明"</span>+limitConfig.getDescription();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取请求携带的参数"><a href="#获取请求携带的参数" class="headerlink" title="获取请求携带的参数"></a>获取请求携带的参数</h2><img data-src="luckymoney_note.assets/image-20191229173946637.png" alt="image-20191229173946637" style="zoom:33%;">



<ul>
<li>url-简洁hello/say/100</li>
</ul>
<p>@PathVariable(“id”) +@GetMapping(“/say/{id}”)</p>
<p>HelloController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/say/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"id:"</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:8081/luckymoney/hello/say/100" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello/say/100</a></p>
<p>id:100</p>
<ul>
<li>url-hello/say?id=19</li>
</ul>
<p>@RequestParam(“id”),撤销@GetMapping(“/say”)的{id}</p>
<p>注意：@RequestParam中id和访问say?id=19名称一致，访问的id不能为空</p>
<p>HelloController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LimitConfig limitConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/say"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">hello</span><span class="params">(@RequestParam(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"id:"</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:8081/luckymoney/hello/say?id=19" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello/say?id=19</a></p>
<p>id:19</p>
<ul>
<li>url-hello/say?id=为空时</li>
</ul>
<p>设置属性非必须属性设置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public  String hello(@RequestParam(value &#x3D; &quot;id&quot; , required &#x3D; false, defaultValue &#x3D; &quot;0&quot;) Integer id)&#123;</span><br></pre></td></tr></table></figure>

<p>不传id时默认为0</p>
<p><a href="http://localhost:8081/luckymoney/hello/say" target="_blank" rel="noopener">http://localhost:8081/luckymoney/hello/say</a></p>
<p>id:0</p>
<ul>
<li>访问切换成post请求</li>
</ul>
<p>请求方式多样，可以跟在url-hello/say?id=后面，也可以在请求体中</p>
<p>推荐参数 放在body的urlencode里面</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/say"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="git提交"><a href="#git提交" class="headerlink" title="git提交"></a>git提交</h2><p>confmoney分支 commit “controller-end”</p>
<h1 id="【收获人生”红颜”知己】撸程序-红包收发操作数据库"><a href="#【收获人生”红颜”知己】撸程序-红包收发操作数据库" class="headerlink" title="【收获人生”红颜”知己】撸程序-红包收发操作数据库"></a>【收获人生”红颜”知己】撸程序-红包收发操作数据库</h1><h2 id="搭配方案："><a href="#搭配方案：" class="headerlink" title="搭配方案："></a>搭配方案：</h2><p>java端：spring-data-jpa：持久层配置标准，定义标准好比接口，实现此规范的产品hibernate，toplink，对spring整合，不用写一行sql语句操作</p>
<p>数据库：mysql</p>
<h2 id="restful-api设计"><a href="#restful-api设计" class="headerlink" title="restful-api设计"></a>restful-api设计</h2><table>
<thead>
<tr>
<th>请求类型</th>
<th>请求路径</th>
<th>请求功能</th>
</tr>
</thead>
<tbody><tr>
<td>get</td>
<td>/luckmoneys</td>
<td>获取红包列表</td>
</tr>
<tr>
<td>post</td>
<td>/luckmoneys</td>
<td>创建一个红包</td>
</tr>
<tr>
<td>get</td>
<td>/luckmoneys/id</td>
<td>通过id查询红包</td>
</tr>
<tr>
<td>put</td>
<td>/luckmoneys/id</td>
<td>通过id更新红包</td>
</tr>
</tbody></table>
<h2 id="引入pom-jpa-mysql"><a href="#引入pom-jpa-mysql" class="headerlink" title="引入pom jpa+mysql"></a>引入pom jpa+mysql</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>注意：不要加版本号，Springbot已经选择好了版本</p>
<h2 id="yml配置mysql"><a href="#yml配置mysql" class="headerlink" title="yml配置mysql"></a>yml配置mysql</h2><p>先建立数据库luckmoney</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8081</span><br><span class="line">  servlet:</span><br><span class="line">    context-path: &#x2F;luckymoney</span><br><span class="line">limit:</span><br><span class="line">  minMoney: 0.1</span><br><span class="line">  maxMoney: 99</span><br><span class="line">  description: 最少要发$&#123;limit.minMoney&#125;元,最多发$&#123;limit.maxMoney&#125;元</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;luckmoney</span><br><span class="line">    username: root</span><br><span class="line">    password: rootroot</span><br><span class="line">  jpa:</span><br><span class="line">    hibernate:</span><br><span class="line">      ddl-auto: create</span><br><span class="line">    show-sql: true #控制台显示sql命令</span><br></pre></td></tr></table></figure>

<h2 id="数据库-创建表"><a href="#数据库-创建表" class="headerlink" title="数据库-创建表"></a>数据库-创建表</h2><p>不需要执行sql</p>
<p>创建java文件命名时首字母大写，<strong>中间不要驼峰命名</strong>，默认识别为一个单词</p>
<p>Luckmoney.java 【空构造方法、get/set、@id导包不要错Java.presistence、id自增】</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Luckmoney</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span> <span class="comment">//自增</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal money;</span><br><span class="line">    <span class="keyword">private</span> String producer;<span class="comment">//发送方</span></span><br><span class="line">    <span class="keyword">private</span> String consumer;<span class="comment">//接收方</span></span><br></pre></td></tr></table></figure>

<p>运行，自动创建表</p>
<blockquote>
<p>控制台输出sql</p>
<p>Hibernate: drop table if exists hibernate_sequence<br>Hibernate: drop table if exists luckmoney<br>Hibernate: create table hibernate_sequence (next_val bigint) engine=MyISAM<br>Hibernate: insert into hibernate_sequence values ( 1 )<br>Hibernate: create table luckmoney (id integer not null, consumer varchar(255), money decimal(19,2), producer varchar(255), primary key (id)) engine=MyISAM</p>
</blockquote>
<p>填充表中数据，并关闭创建表yml配置create-&gt;update</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jpa:</span><br><span class="line">  hibernate:</span><br><span class="line">    ddl-auto: update</span><br><span class="line">  show-sql: true #控制台显示sql命令</span><br></pre></td></tr></table></figure>

<h2 id="LuckymoneyRepository接口"><a href="#LuckymoneyRepository接口" class="headerlink" title="LuckymoneyRepository接口"></a>LuckymoneyRepository接口</h2><p>Repository就是和数据连接的Dao，这样写和jpa命名一致</p>
<p>继承JpaRepository&lt;Luckmoney,Integer&gt;<strong>数据库的实体类，和id的类型</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line">import org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line">public interface LuckymoneyRepository extends JpaRepository&lt;Luckmoney,Integer&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="LuckmoneyController"><a href="#LuckmoneyController" class="headerlink" title="LuckmoneyController"></a>LuckmoneyController</h2><p>先写好dao接口再调cotroller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LuckmoneyController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取红包列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Luckmoney&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="列表输出"><a href="#列表输出" class="headerlink" title="列表输出"></a>列表输出</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">get：http:&#x2F;&#x2F;localhost:8081&#x2F;luckymoney&#x2F;luckymoneys</span><br><span class="line">[&#123;&quot;id&quot;:1,&quot;money&quot;:0.10,&quot;producer&quot;:&quot;李四&quot;,&quot;consumer&quot;:&quot;zhangsan&quot;&#125;,&#123;&quot;id&quot;:2,&quot;money&quot;:0.20,&quot;producer&quot;:&quot;王五&quot;,&quot;consumer&quot;:&quot;李四&quot;&#125;]</span><br><span class="line"></span><br><span class="line">post：http:&#x2F;&#x2F;localhost:8081&#x2F;luckymoney&#x2F;luckymoneys</span><br><span class="line">producer 啊本</span><br><span class="line">money 10</span><br><span class="line">&#123;</span><br><span class="line">    &quot;id&quot;: 3,</span><br><span class="line">    &quot;money&quot;: 10,</span><br><span class="line">    &quot;producer&quot;: &quot;啊本&quot;,</span><br><span class="line">    &quot;consumer&quot;: null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get：http:&#x2F;&#x2F;localhost:8081&#x2F;luckymoney&#x2F;luckymoneys&#x2F;2</span><br><span class="line">&#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;money&quot;: 100.00,</span><br><span class="line">    &quot;producer&quot;: &quot;瑞新&quot;,</span><br><span class="line">    &quot;consumer&quot;: null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">put：http:&#x2F;&#x2F;localhost:8081&#x2F;luckymoney&#x2F;luckymoneys&#x2F;2</span><br><span class="line">consumer 师姐</span><br><span class="line">&#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;money&quot;: 1.00,</span><br><span class="line">    &quot;producer&quot;: &quot;阿本&quot;,</span><br><span class="line">    &quot;consumer&quot;: &quot;师姐&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="【搞定并发就在一起】事务就像乱点鸳鸯的丈母娘"><a href="#【搞定并发就在一起】事务就像乱点鸳鸯的丈母娘" class="headerlink" title="【搞定并发就在一起】事务就像乱点鸳鸯的丈母娘"></a>【搞定并发就在一起】事务就像乱点鸳鸯的丈母娘</h1><p>数据库事务，要么都完成要么都不做</p>
<h2 id="LuckymoneyService"><a href="#LuckymoneyService" class="headerlink" title="LuckymoneyService"></a>LuckymoneyService</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bennyrhys.luckymoney;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LuckymoneyService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LuckymoneyRepository luckymoneyRepository;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建两个红包</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createTwo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Luckmoney luckmoney = <span class="keyword">new</span> Luckmoney();</span><br><span class="line">        luckmoney.setProducer(<span class="string">"瑞新"</span>);</span><br><span class="line">        luckmoney.setMoney(<span class="keyword">new</span> BigDecimal(<span class="string">"520"</span>));</span><br><span class="line"></span><br><span class="line">        luckymoneyRepository.save(luckmoney);</span><br><span class="line">        Luckmoney luckmoney2 = <span class="keyword">new</span> Luckmoney();</span><br><span class="line">        luckmoney2.setProducer(<span class="string">"瑞新"</span>);</span><br><span class="line">        luckmoney2.setMoney(<span class="keyword">new</span> BigDecimal(<span class="string">"1314"</span>));</span><br><span class="line"></span><br><span class="line">        luckymoneyRepository.save(luckmoney2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="LuckmoneyController-1"><a href="#LuckmoneyController-1" class="headerlink" title="LuckmoneyController"></a>LuckmoneyController</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发两个红包-测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"luckymoneys/two"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">creatTwo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    service.createTwo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="请求发送红包"><a href="#请求发送红包" class="headerlink" title="请求发送红包"></a>请求发送红包</h2><p><a href="http://localhost:8081/luckymoney/luckymoneys/two" target="_blank" rel="noopener">http://localhost:8081/luckymoney/luckymoneys/two</a>    状态码返回200</p>
<blockquote>
<p>Hibernate: select next_val as id_val from hibernate_sequence for update<br>Hibernate: update hibernate_sequence set next_val= ? where next_val=?<br>Hibernate: insert into luckmoney (consumer, money, producer, id) values (?, ?, ?, ?)<br>Hibernate: select next_val as id_val from hibernate_sequence for update<br>Hibernate: update hibernate_sequence set next_val= ? where next_val=?<br>Hibernate: insert into luckmoney (consumer, money, producer, id) values (?, ?, ?, ?)</p>
</blockquote>
<h2 id="配置测试环境"><a href="#配置测试环境" class="headerlink" title="配置测试环境"></a>配置测试环境</h2><p>decimal类型的金额，设置长度为五位（则整数为3小数为2）</p>
<p>1314的红包创建报错，数值越界Out of range value for column ‘money’ at row 1</p>
<p>写入一条520，另一条1314失败，不符合同时发生的事务要求</p>
<h2 id="搞定并发"><a href="#搞定并发" class="headerlink" title="搞定并发"></a>搞定并发</h2><p>添加注解@Transactional,选择导入spring那个，先清空数据库，结果520依旧存入，1314失败</p>
<ul>
<li>事务理解：<ul>
<li>@注解控制java事务</li>
<li>有些数据库不支持事务，mysql有自己的事务机制（MYISAM）-&gt;(mysql支持多类型修改成innoDB实现事务)</li>
</ul>
</li>
</ul>
<p>​    </p>
]]></content>
  </entry>
  <entry>
    <title>教程概述-极客浪漫表白红包</title>
    <url>/2019/12/29/%E6%95%99%E7%A8%8B%E6%A6%82%E8%BF%B0-%E6%9E%81%E5%AE%A2%E6%B5%AA%E6%BC%AB%E8%A1%A8%E7%99%BD%E7%BA%A2%E5%8C%85/</url>
    <content><![CDATA[<p>[TOC]</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>SpringBoot两小时快速入门，极客表白浪漫红包</p>
<p>信息时代最重视的是什么？是效率！企业最重视的人才是什么？是高效能人士！所谓“天下武功唯快不破 ” ，为此专门推出此教程，让你快速Get到SpringBoot实际应用技能。本教程所有代码、笔记由bennyrhys免费提供，遵循”学习其实可以很快乐“的原则，以极客浪漫情怀的”红包表白程序“为场景，贯穿微服务必学框架-SpringBoot相关内容，将初学SpringBoot的踩坑点进行指点，为同学打造麻雀虽小五脏俱全的教程。标题风趣幽默，必然让你本次的学习之旅尽兴而归。载着干货的老司机，在召唤你~</p>
<img data-src="README.assets/image-20191229211932494.png" alt="image-20191229211932494" style="zoom:40%;">

<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>GitHub:<a href="https://github.com/bennyrhys/LuckyMoney-SpringBootProject" target="_blank" rel="noopener">点击预览——极客浪漫红包表白程序</a></p>
<p>详细文档：<a href="https://bennyrhys.github.io/about/">点击搜索——极客浪漫红包表白详解</a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p>【让宝宝不要输在起跑线】</p>
<ul>
<li>文档说明</li>
<li>版本配置</li>
</ul>
</li>
<li><p>【初识】SpringBoot-hello world</p>
<ul>
<li>解决打包失败</li>
<li>配置文件<ul>
<li>application.properties</li>
<li>application.yml(推荐)</li>
</ul>
</li>
<li>git提交 ：helloworld+yml启动及简单配置</li>
</ul>
</li>
<li><p>【君子之交-淡如水】解放双手，配置红包</p>
<ul>
<li>手动单个配置</li>
<li>自动多个配置红包金额【limit类限制金额范围】</li>
</ul>
</li>
<li><p>生成环境开发环境划分</p>
</li>
<li><p>小结</p>
</li>
<li><p>【人生若只如初见】从“程序”入口Controller开始</p>
<ul>
<li>controller+thymeleaf（不推荐，前后端不分离）</li>
<li>恢复访问@Controller+@ResponseBody</li>
<li>多访问url同返回（名称数组）</li>
<li>url深层访问：@RequestMapping(“hello”)</li>
<li>post请求访问</li>
<li>Get/post都行的访问</li>
<li>获取请求携带的参数</li>
<li>git提交</li>
</ul>
</li>
<li><p>【收获人生”红颜”知己】撸程序-红包收发操作数据库</p>
<ul>
<li>搭配方案：</li>
<li>restful-api设计</li>
<li>引入pom jpa+mysql</li>
<li>yml配置mysql</li>
<li>数据库-创建</li>
<li>LuckymoneyRepository接口</li>
<li>LuckmoneyController</li>
<li>列表输出</li>
</ul>
</li>
<li><p>【搞定并发就在一起】事务就像乱点鸳鸯的丈母娘</p>
<ul>
<li>LuckymoneyService</li>
<li>LuckmoneyController    </li>
<li>请求发送红包</li>
<li>配置测试环境</li>
<li>搞定并发</li>
</ul>
</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Hexo-切换一个主题</title>
    <url>/2019/12/26/Hexo-%E5%88%87%E6%8D%A2%E4%B8%80%E4%B8%AA%E4%B8%BB%E9%A2%98/</url>
    <content><![CDATA[<p>[TOC]</p>
<h2 id="Hexo提升篇-切换一个主题"><a href="#Hexo提升篇-切换一个主题" class="headerlink" title="Hexo提升篇-切换一个主题"></a>Hexo提升篇-切换一个主题</h2><h3 id="第一轮测试-页面局部显示"><a href="#第一轮测试-页面局部显示" class="headerlink" title="第一轮测试-页面局部显示"></a>第一轮测试-页面局部显示</h3><p>疑npm install 导致显示不全，测试二不安装依赖</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;挑选主题</span><br><span class="line">https:&#x2F;&#x2F;hexo.io&#x2F;themes&#x2F;</span><br><span class="line">&#x2F;&#x2F;克隆主题到本地,放置thmemes</span><br><span class="line">bennyrhys&gt;git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;hexo-theme-next.git </span><br><span class="line">&#x2F;&#x2F;更改配置文件</span><br><span class="line">theme: hexo-theme-next</span><br><span class="line">&#x2F;&#x2F;安装依赖插件</span><br><span class="line">$ cd hexo-theme-next</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h3 id="第二轮测试-全部显示（未安装依赖，切换主题风格）"><a href="#第二轮测试-全部显示（未安装依赖，切换主题风格）" class="headerlink" title="第二轮测试-全部显示（未安装依赖，切换主题风格）"></a>第二轮测试-全部显示（未安装依赖，切换主题风格）</h3><a id="more"></a>
<p>疑配置文件未打开。</p>
<ul>
<li>在 Hexo 中有两份主要的配置文件，其名称都是 _config.yml。 </li>
<li>其中，一份位于站点根目录下，主要包含 Hexo 本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。</li>
<li>为了描述方便，在以下说明中，将前者称为站点配置文件， 后者称为主题配置文件。</li>
<li>以下所有终端执行的命令都在你的Hexo根目录下<h4 id="主题配置文件-菜单"><a href="#主题配置文件-菜单" class="headerlink" title="主题配置文件-菜单"></a>主题配置文件-菜单</h4>我们刚开始默认的菜单只有首页和归档两个，不能够满足我们的要求，所以需要添加菜单，打开 主题配置文件 找到Menu Settings<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F; || home                          &#x2F;&#x2F;首页</span><br><span class="line">  archives: &#x2F;archives&#x2F; || archive          &#x2F;&#x2F;归档</span><br><span class="line">  categories: &#x2F;categories&#x2F; || th           &#x2F;&#x2F;分类</span><br><span class="line">  tags: &#x2F;tags&#x2F; || tags                     &#x2F;&#x2F;标签</span><br><span class="line">  about: &#x2F;about&#x2F; || user                   &#x2F;&#x2F;关于</span><br><span class="line">  #schedule: &#x2F;schedule&#x2F; || calendar        &#x2F;&#x2F;日程表</span><br><span class="line">  #sitemap: &#x2F;sitemap.xml || sitemap        &#x2F;&#x2F;站点地图</span><br><span class="line">  #commonweal: &#x2F;404&#x2F; || heartbeat          &#x2F;&#x2F;公益404</span><br></pre></td></tr></table></figure>
看看你需要哪个菜单就把哪个取消注释打开就行了；<br>关于后面的格式，以archives: /archives/ || archive为例：<br>|| 之前的/archives/表示标题“归档”，关于标题的格式可以去themes/next/languages/zh-Hans.yml中参考或修改<br>||之后的archive表示图标，可以去Font Awesome中查看或修改，Next主题所有的图标都来自Font Awesome。<h4 id="Next主题还有4种风格"><a href="#Next主题还有4种风格" class="headerlink" title="Next主题还有4种风格"></a>Next主题还有4种风格</h4>我们百里挑一选择了Next主题，不过Next主题还有4种风格供我们选择，打开 主题配置文件 找到Scheme Settings<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure>
4种风格大同小异，本人用的是<a href="https://bennyrhys.github.io">Gemini</a>风格，你们可以选择自己喜欢的风格。<h4 id="侧栏设置"><a href="#侧栏设置" class="headerlink" title="侧栏设置"></a>侧栏设置</h4>侧栏设置包括：侧栏位置、侧栏显示与否、文章间距、返回顶部按钮等等<br>打开 主题配置文件 找到sidebar字段<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sidebar:</span><br><span class="line"># Sidebar Position - 侧栏位置（只对Pisces | Gemini两种风格有效）</span><br><span class="line">  position: left        &#x2F;&#x2F;靠左放置</span><br><span class="line">  #position: right      &#x2F;&#x2F;靠右放置</span><br><span class="line"></span><br><span class="line"># Sidebar Display - 侧栏显示时机（只对Muse | Mist两种风格有效）</span><br><span class="line">  #display: post        &#x2F;&#x2F;默认行为，在文章页面（拥有目录列表）时显示</span><br><span class="line">  display: always       &#x2F;&#x2F;在所有页面中都显示</span><br><span class="line">  #display: hide        &#x2F;&#x2F;在所有页面中都隐藏（可以手动展开）</span><br><span class="line">  #display: remove      &#x2F;&#x2F;完全移除</span><br><span class="line"></span><br><span class="line">  offset: 12            &#x2F;&#x2F;文章间距（只对Pisces | Gemini两种风格有效）</span><br><span class="line"></span><br><span class="line">  b2t: false            &#x2F;&#x2F;返回顶部按钮（只对Pisces | Gemini两种风格有效）</span><br><span class="line"></span><br><span class="line">  scrollpercent: true   &#x2F;&#x2F;返回顶部按钮的百分比</span><br></pre></td></tr></table></figure>
<h4 id="头像设置"><a href="#头像设置" class="headerlink" title="头像设置"></a>头像设置</h4>打开 主题配置文件 找到Sidebar Avatar字段<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line">avatar: &#x2F;images&#x2F;header.jpg</span><br></pre></td></tr></table></figure>
这是头像的路径，只需把你的头像命名为header.jpg（随便命名）放入themes/next/source/images中，将avatar的路径名改成你的头像名就OK啦！</li>
</ul>
<p>//最新方法-配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line">avatar:</span><br><span class="line">  # Replace the default image and set the url here.</span><br><span class="line">  url: &#x2F;images&#x2F;head_logo.jpg</span><br><span class="line">  # If true, the avatar will be dispalyed in circle.</span><br><span class="line">  rounded: true</span><br><span class="line">  # If true, the avatar will be rotated with the cursor.</span><br><span class="line">  rotated: true</span><br><span class="line"></span><br><span class="line"># Posts &#x2F; Categories &#x2F; Tags in sidebar.</span><br><span class="line">site_state: true</span><br></pre></td></tr></table></figure>
<h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;命令创建</span><br><span class="line">hexo new page &quot;tags&quot; </span><br><span class="line">&#x2F;&#x2F;修改创建的文件</span><br><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2019-12-26 19:23:43</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br><span class="line">&#x2F;&#x2F;打开主题的tag</span><br><span class="line">&#x2F;&#x2F;给文章加个标签</span><br></pre></td></tr></table></figure>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;命令创建</span><br><span class="line">hexo new page &quot;categories&quot;</span><br><span class="line">&#x2F;&#x2F;修改新生成的文件</span><br><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2019-12-26 19:37:01</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br><span class="line">&#x2F;&#x2F;打开categories</span><br></pre></td></tr></table></figure>

<h4 id="媒体外链"><a href="#媒体外链" class="headerlink" title="媒体外链"></a>媒体外链</h4><p>//配置文件<br>social:<br>  GitHub: <a href="https://github.com/bennyrhys" target="_blank" rel="noopener">https://github.com/bennyrhys</a> || github<br>  E-Mail: mailto:<a href="mailto:bennyrhys@163.com">bennyrhys@163.com</a> || envelope<br>  QQ: 2389992466 || qq<br>  WeiChat: bennyrhys-sir || weixin<br>  CSDN: <a href="https://blog.csdn.net/weixin_43469680" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43469680</a> || fa-link<br>//修改图标<br>图标网站：<a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">点击访问</a></p>
<h4 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;创建</span><br><span class="line">hexo new page &quot;about&quot; </span><br><span class="line">&#x2F;&#x2F;配置文件</span><br><span class="line">&#x2F;&#x2F;启用</span><br></pre></td></tr></table></figure>
<h4 id="相册"><a href="#相册" class="headerlink" title="相册"></a>相册</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;命令创建</span><br><span class="line">hexo new page &quot;photos&quot;</span><br><span class="line">&#x2F;&#x2F;第三方github工具</span><br><span class="line">justified-gallery</span><br></pre></td></tr></table></figure>
<h4 id="阅读量"><a href="#阅读量" class="headerlink" title="阅读量"></a>阅读量</h4><p>//打开配置busuanzi</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  enable:true</span><br></pre></td></tr></table></figure>
<p>\themes\next\layout_third-party\下的busuanzi.swing<br>将<br>src=“<a href="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js”" target="_blank" rel="noopener">https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js”</a><br>修改为<br>src=“<a href="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js”" target="_blank" rel="noopener">https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js”</a></p>
<h4 id="添加动态背景"><a href="#添加动态背景" class="headerlink" title="添加动态背景"></a>添加动态背景</h4><p>js文件放在\themes\next\source\js\src<br>更新\themes\next\layout_layout.swig文件，在末尾（在前面引用会出现找不到的bug）添加以下 js 引入代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;src&#x2F;back.js&quot; &gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;法二</span><br><span class="line">配置文件，不太靠谱</span><br><span class="line">canvas_nest:</span><br><span class="line">  enable: false</span><br></pre></td></tr></table></figure>
<h4 id="gitalk评论"><a href="#gitalk评论" class="headerlink" title="gitalk评论"></a>gitalk评论</h4><p>gitalk：一个基于 Github Issue 和 Preact 开发的评论插件<br>详情Demo可见：<a href="https://gitalk.github.io/" target="_blank" rel="noopener">https://gitalk.github.io/</a><br>在GitHub上注册新应用，链接：<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">https://github.com/settings/applications/new</a><br>参数说明：<br>Application name： # 应用名称，随意<br>Homepage URL： # 网站URL，如<a href="https://asdfv1929.github.io" target="_blank" rel="noopener">https://asdfv1929.github.io</a><br>Application description # 描述，随意<br>Authorization callback URL：# 网站URL，<a href="https://asdfv1929.github.io" target="_blank" rel="noopener">https://asdfv1929.github.io</a></p>
<p>点击注册后，页面跳转如下，其中Client ID和Client Secret在后面的配置中需要用到，到时复制粘贴即可：<br>Client ID<br>-52515de43eada8e083b<br>Client Secret<br>-ee2994d96e2d4a5684188df17a49fe8e9a6c3d6<br>gitalk.swig<br>新建/layout/_third-party/comments/gitalk.swig文件，并添加内容：</p>
<h4 id="valine评论"><a href="#valine评论" class="headerlink" title="valine评论"></a>valine评论</h4><p>//注册LeanCloud<br>注册地址 <a href="https://leancloud.cn/" target="_blank" rel="noopener">https://leancloud.cn/</a><br>获取key，添加安全，网站链接<br>配置文件valine对应id</p>
<h4 id="头像圆形旋转"><a href="#头像圆形旋转" class="headerlink" title="头像圆形旋转"></a>头像圆形旋转</h4><p>介绍一下实现头像圆形，鼠标经过旋转或者一直让旋转效果，主要是修改 Hexo 目录下 \themes\next\source\css_common\components\sidebar\sidebar-author.styl 文件。<br>修改 sidebar-author.styl 文件中 .site-author-image CSS 样式如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  padding: $site-author-image-padding;</span><br><span class="line">  max-width: $site-author-image-width;</span><br><span class="line">  height: $site-author-image-height;</span><br><span class="line">  border: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  </span><br><span class="line">&#x2F;* 头像圆形 *&#x2F;</span><br><span class="line">  border-radius: 80px;</span><br><span class="line">  -webkit-border-radius: 80px;</span><br><span class="line">  -moz-border-radius: 80px;</span><br><span class="line">  box-shadow: inset 0 -1px 0 #333sf;</span><br><span class="line"></span><br><span class="line">  &#x2F;* 鼠标经过头像旋转360度 *&#x2F;</span><br><span class="line">  -webkit-transition: -webkit-transform 1.5s ease-out;</span><br><span class="line">  -moz-transition: -moz-transform 1.5s ease-out;</span><br><span class="line">  transition: transform 1.5s ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">img:hover &#123;</span><br><span class="line">  &#x2F;* 鼠标经过头像旋转360度 *&#x2F;</span><br><span class="line">  -webkit-transform: rotateZ(360deg);</span><br><span class="line">  -moz-transform: rotateZ(360deg);</span><br><span class="line">  transform: rotateZ(360deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="阅读进度条"><a href="#阅读进度条" class="headerlink" title="阅读进度条"></a>阅读进度条</h4><p>reading_progress:<br>  enable: true</p>
<h4 id="百度推送"><a href="#百度推送" class="headerlink" title="百度推送"></a>百度推送</h4><p>//配置文件<br>baidu_push: true</p>
<h4 id="优化SEO"><a href="#优化SEO" class="headerlink" title="优化SEO"></a>优化SEO</h4><p>更改网站副标题（将是主要网站描述）和所有文章/页面标题的标题层次结构，以便更好地</p>
<p>seo: true //建议 true</p>
<h4 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h4><p>npm install hexo-generator-searchdb –save</p>
<h4 id="友链"><a href="#友链" class="headerlink" title="友链"></a>友链</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Blog rolls</span><br><span class="line">links_settings:</span><br><span class="line">  icon: link</span><br><span class="line">  title: 友链</span><br><span class="line">  # Available values: block | inline</span><br><span class="line">  layout: block</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  #Title: http:&#x2F;&#x2F;yoursite.com</span><br><span class="line">  吉他易学网&#x2F;EasyGuitar: https:&#x2F;&#x2F;www.996cloud.work</span><br></pre></td></tr></table></figure>
<h4 id="开启打赏"><a href="#开启打赏" class="headerlink" title="开启打赏"></a>开启打赏</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reward_settings:</span><br><span class="line">  # If true, reward will be displayed in every article by default.</span><br><span class="line">  enable: true</span><br><span class="line">  animation: true</span><br><span class="line">  comment: 请作者喝杯茶～</span><br><span class="line"></span><br><span class="line">reward:</span><br><span class="line">  wechatpay: &#x2F;images&#x2F;wechatpay.png</span><br><span class="line">  alipay: &#x2F;images&#x2F;alipay.jpg</span><br><span class="line">  #bitcoin: &#x2F;images&#x2F;bitcoin.jpg</span><br></pre></td></tr></table></figure>
<h4 id="开启订阅公众号"><a href="#开启订阅公众号" class="headerlink" title="开启订阅公众号"></a>开启订阅公众号</h4><p>有些版本在，wechat属性配置，升级版没有</p>
<h4 id="阅读更多"><a href="#阅读更多" class="headerlink" title="阅读更多"></a>阅读更多</h4><p>老版本auto_excer属性配置高度<br>新版替代法</p>
<!-- more -->//夹在文章中
<h4 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h4><p>配置文件jiathis：true<br>已经淘汰</p>
<h4 id="加载效果"><a href="#加载效果" class="headerlink" title="加载效果"></a>加载效果</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pace:</span><br><span class="line">  enable: true</span><br><span class="line">  # Themes list:</span><br><span class="line">  # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span><br><span class="line">  # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span><br><span class="line">  theme: minimal</span><br></pre></td></tr></table></figure>
<h4 id="字数统计，阅读时长"><a href="#字数统计，阅读时长" class="headerlink" title="字数统计，阅读时长"></a>字数统计，阅读时长</h4><h4 id="标题toc优化"><a href="#标题toc优化" class="headerlink" title="标题toc优化"></a>标题toc优化</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  # Automatically add list number to toc.</span><br><span class="line">  number: true</span><br><span class="line">  # If true, all words will placed on next lines if header width longer then sidebar width.</span><br><span class="line">  wrap: true</span><br><span class="line">  # If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span><br><span class="line">  expand_all: true</span><br><span class="line">  # Maximum heading depth of generated toc.</span><br><span class="line">  max_depth: 6</span><br></pre></td></tr></table></figure>
<h4 id="图片不显示问题"><a href="#图片不显示问题" class="headerlink" title="图片不显示问题"></a>图片不显示问题</h4><p>//设置站点配置文件<br>post_asset_folder: true<br>//下载插件</p>
]]></content>
      <categories>
        <category>教程-博客搭建</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
        <tag>快速搭建博客</tag>
        <tag>tags创建</tag>
      </tags>
  </entry>
  <entry>
    <title>启示录</title>
    <url>/2019/12/26/%E5%90%AF%E7%A4%BA%E5%BD%95/</url>
    <content><![CDATA[<p>[TOC]</p>
<h2 id="开篇博客-说明"><a href="#开篇博客-说明" class="headerlink" title="开篇博客-说明"></a>开篇博客-说明</h2><p>专注分享JAVA全栈技术，JAVA零基础到高级，数据结构，框架，设计模式，微服务，中间件，大数据，网络爬虫，开源项目，阿里技术，面试经</p>
<p>个人简介见，站点左侧关于。</p>
<p>guihub：<a href="https://github.com/bennyrhys" target="_blank" rel="noopener">点此访问</a><br>csdn:<a href="https://blog.csdn.net/weixin_43469680" target="_blank" rel="noopener">点此访问</a><br>公众号：让我遇见相似的灵魂<br>邮箱：<a href="mailto:bennyrhys@163.com">bennyrhys@163.com</a></p>
<h2 id="第一次创建命令"><a href="#第一次创建命令" class="headerlink" title="第一次创建命令"></a>第一次创建命令</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;创建文件</span><br><span class="line">hexo new &quot;启示录&quot;</span><br><span class="line">&#x2F;&#x2F;生产静态文件</span><br><span class="line">hexo g</span><br><span class="line">&#x2F;&#x2F;启动server</span><br><span class="line">hexo server</span><br><span class="line">&#x2F;&#x2F;页面预览</span><br><span class="line">http:&#x2F;&#x2F;localhost:4000</span><br><span class="line">&#x2F;&#x2F;启动监控</span><br><span class="line">hexo g -w </span><br><span class="line">&#x2F;&#x2F;一键部署（先修改配置_config.yml的type: git 参数） </span><br><span class="line">Git</span><br><span class="line">1.配置</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt; #https:&#x2F;&#x2F;github.com&#x2F;bennyrhys&#x2F;bennyrhys.github.io.git</span><br><span class="line">  branch: [branch] #master</span><br><span class="line">  message: [message] #先不写</span><br><span class="line">2.安装 hexo-deployer-git。</span><br><span class="line">$ npm install hexo-deployer-git --save</span><br><span class="line">3.部署</span><br><span class="line">hexo deploy  &#x2F;&#x2F;如果重新生成了文件在部署末尾加 -g</span><br></pre></td></tr></table></figure>

<h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><p>感谢您的阅读，博客持续更新中……</p>
]]></content>
      <categories>
        <category>教程-博客搭建</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
        <tag>快速搭建博客</tag>
        <tag>tags创建</tag>
      </tags>
  </entry>
</search>
